import java.util.concurrent.Semaphore;


public class Task1 {


	/* a[0] for water, a[1] for ice, a[2] for cup */
	Semaphore[] a = new Semaphore[3];
	Semaphore server = new Semaphore(1);


	void Server() {
		int i,j;
		while(true) {
			i = random(3); /* returns a random integer 0, 1 or 2 for i */
			j = random(3); /* returns a random integer 0, 1 or 2 for j */
			if (i != j) { /* i and j must be different */
				wait(server);
				k = 3 - (i+j); /*the drinker with the k-th ingredient
	                                is identified*/
				Signal(a[k]);
			}
		}//end of while
	}//end of Server

	void Drinker(int r) {
		/* r indicates which ingredients this drinker has */
		while(true) {
			a[r].wait();
			Drink( );
			server.wait();
		}
	}//end of Drinker

	public static void main(String[] args) {
		// TODO Auto-generated method stub

	}

}
